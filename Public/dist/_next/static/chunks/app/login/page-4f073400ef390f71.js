(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7013:function(e,t,r){Promise.resolve().then(r.bind(r,6374))},6374:function(e,t,r){"use strict";r.r(t);var s=r(7437),n=r(9376),a=r(2265),l=r(9751),i=r(1410),o=r(4889),c=r(7648),u=r(6223);t.default=(0,u.v)(()=>{let e=(0,n.useRouter)(),{login:t}=(0,o.a)(),[r,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[x,m]=(0,a.useState)("");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.NavbarSection,{}),(0,s.jsxs)("form",{onSubmit:s=>{s.preventDefault(),localStorage.getItem("user")||(t(r,d)?(m("Success. Redirecting..."),e.push("/")):m("Invalid credentials"))},className:"flex max-w-md flex-col gap-4 mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl text-center font-bold my-4 text-black dark:text-white",children:"Login"}),(0,s.jsxs)("div",{children:[x&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l.bZ,{color:"blue",children:[(0,s.jsx)("strong",{children:"Info:"})," ",x]})}),(0,s.jsx)("div",{className:"mb-2 block",children:(0,s.jsx)(l.__,{htmlFor:"username",value:"Your username"})}),(0,s.jsx)(l.oi,{id:"username",type:"text",placeholder:"johndoe",value:r,onChange:e=>u(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-2 block",children:(0,s.jsx)(l.__,{htmlFor:"password",value:"Your password"})}),(0,s.jsx)(l.oi,{id:"password",type:"password",value:d,onChange:e=>h(e.target.value),required:!0})]}),(0,s.jsx)(l.zx,{type:"submit",children:"Login"}),(0,s.jsx)(c.default,{href:"/register",className:"text-cyan-600 hover:underline dark:text-cyan-500 text-center",children:"Register new user."})]})]})})},1410:function(e,t,r){"use strict";r.d(t,{NavbarSection:function(){return o}});var s=r(7437),n=r(4889),a=r(9751),l=r(7648),i=r(2265);function o(){let{user:e,logout:t}=(0,n.a)(),[r,o]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(e)o(e.username);else{let e=localStorage.getItem("user");e&&o(JSON.parse(e).username)}},[e]),(0,s.jsxs)(a.wp,{fluid:!0,rounded:!0,children:[(0,s.jsx)(a.UG,{children:(0,s.jsxs)("span",{className:"self-center whitespace-nowrap text-xl font-semibold text-black dark:text-white",children:["Welcome, ",r||"guest","!"]})}),(0,s.jsxs)("div",{className:"flex md:order-2",children:[r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"flex items-center mr-4 text-black dark:text-white",children:r}),(0,s.jsx)(a.zx,{onClick:t,children:"Logout"})]}):(0,s.jsx)(l.default,{href:"/login",children:(0,s.jsx)(a.zx,{children:"Login"})}),(0,s.jsx)(a.Ok,{children:(0,s.jsx)(a.Sh,{})}),(0,s.jsx)(a.My,{})]}),(0,s.jsxs)(a.kF,{children:[e&&e.sessionId&&(0,s.jsx)(l.default,{href:"/favorite",children:(0,s.jsx)(a.iV,{as:"div",children:"Favorites"})}),(0,s.jsx)(l.default,{href:"/",children:(0,s.jsx)(a.iV,{as:"div",children:"Dashboard"})})]})]})}},4889:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return o},a:function(){return c}});var s=r(7437),n=r(2265),a=r(9981),l=r(9376);let i=(0,n.createContext)(void 0),o=e=>{let{children:t}=e,r=(0,l.useRouter)(),[o,c]=(0,n.useState)(null),[u,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("user");e&&(c(JSON.parse(e)),d(!1))},[]);let h=async e=>{try{let t=await a.Z.get("/3/authentication/token/new"),r=await t.data,s="https://www.themoviedb.org/authenticate/".concat(r.request_token,"?redirect_to=").concat("".concat("http://localhost:3000"),"/approved?username=").concat(e);window.open(s,"_blank")}catch(e){console.log(e)}},x=async(e,t)=>{let r=localStorage.getItem("userdb"),s=r?JSON.parse(r):[];if(s.find(t=>t.username===e))return!1;{await h(e);let r={username:e,password:t,sessionId:null};return s.push(r),localStorage.setItem("userdb",JSON.stringify(s)),c(r),!0}};return(0,s.jsx)(i.Provider,{value:{user:o,login:(e,t)=>{let r=localStorage.getItem("userdb"),s=(r?JSON.parse(r):[]).find(t=>t.username===e);return!!s&&s.password===t&&(s.sessionId||h(e),c(s),localStorage.setItem("user",JSON.stringify(s)),!0)},register:x,logout:()=>{c(null),localStorage.removeItem("user"),window.location.reload(),r.push("/")}},children:t})},c=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6223:function(e,t,r){"use strict";r.d(t,{Q:function(){return l},v:function(){return i}});var s=r(7437),n=r(2265),a=r(9376);let l=e=>t=>{let r=(0,a.useRouter)();return(0,n.useEffect)(()=>{localStorage.getItem("user")||r.push("/login")},[r]),(0,s.jsx)(e,{...t})},i=e=>t=>{let r=(0,a.useRouter)();return(0,n.useEffect)(()=>{localStorage.getItem("user")&&r.push("/")},[r]),(0,s.jsx)(e,{...t})}},9981:function(e,t,r){"use strict";let s=r(3464).Z.create({baseURL:"https://api.themoviedb.org",headers:{accept:"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNDExNTRiZTU3ODExZDJhZjY2YTY3Y2IzNmJlNjU2NiIsIm5iZiI6MTcyOTEyMjYxOC41Mzk2NTUsInN1YiI6IjY3MGU1ZjdmMGI4MDA1MzdkNzVjZWFjNiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.1ydqrJxAM5ja3tZCKmktPtenQ68DkX_f6E-5m2kyVsA")}});t.Z=s}},function(e){e.O(0,[51,240,699,422,501,301,503,648,751,971,117,744],function(){return e(e.s=7013)}),_N_E=e.O()}]);