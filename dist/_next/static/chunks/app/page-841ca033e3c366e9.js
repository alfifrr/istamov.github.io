(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4960:function(e,t,s){Promise.resolve().then(s.bind(s,1410)),Promise.resolve().then(s.bind(s,2183)),Promise.resolve().then(s.bind(s,641))},1756:function(e,t,s){"use strict";var r=s(7437);s(2265);var a=s(9751);let o={root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-start gap-4 p-2",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}};t.Z=e=>{let{movie:t,onChange:s,user:n,checkedIds:i}=e,l=i&&i.includes(t.id);return(0,r.jsxs)(a.Zb,{theme:o,style:{maxWidth:"200px",height:"auto"},className:"max-w-sm",imgAlt:t.title,imgSrc:"https://image.tmdb.org/t/p/".concat("w".concat(300)).concat(t.poster_path),children:[n&&n.sessionId&&(0,r.jsx)(a.XZ,{checked:l,onChange:e=>s&&s(t.id,e.target.checked)}),(0,r.jsx)("h5",{className:"text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:t.title}),(0,r.jsx)("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:t.overview.length>50?"".concat(t.overview.substring(0,50),"..."):t.overview})]},t.id)}},1410:function(e,t,s){"use strict";s.d(t,{NavbarSection:function(){return l}});var r=s(7437),a=s(4889),o=s(9751),n=s(7648),i=s(2265);function l(){let{user:e,logout:t}=(0,a.a)(),[s,l]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(e)l(e.username);else{let e=localStorage.getItem("user");e&&l(JSON.parse(e).username)}},[e]),(0,r.jsxs)(o.wp,{fluid:!0,rounded:!0,children:[(0,r.jsx)(o.UG,{children:(0,r.jsxs)("span",{className:"self-center whitespace-nowrap text-xl font-semibold text-black dark:text-white",children:["Welcome, ",s||"guest","!"]})}),(0,r.jsxs)("div",{className:"flex md:order-2",children:[s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"flex items-center mr-4 text-black dark:text-white",children:s}),(0,r.jsx)(o.zx,{onClick:t,children:"Logout"})]}):(0,r.jsx)(n.default,{href:"/login",children:(0,r.jsx)(o.zx,{children:"Login"})}),(0,r.jsx)(o.Ok,{children:(0,r.jsx)(o.Sh,{})}),(0,r.jsx)(o.My,{})]}),(0,r.jsxs)(o.kF,{children:[e&&e.sessionId&&(0,r.jsx)(n.default,{href:"/favorite",children:(0,r.jsx)(o.iV,{as:"div",children:"Favorites"})}),(0,r.jsx)(n.default,{href:"/",children:(0,r.jsx)(o.iV,{as:"div",children:"Dashboard"})})]})]})}},2183:function(e,t,s){"use strict";var r=s(7437),a=s(2265),o=s(9085),n=s(4889),i=s(1756),l=s(6113),c=s(9981);t.default=()=>{let[e,t]=(0,a.useState)(),[s,d]=(0,a.useState)(null),[u,h]=(0,a.useState)([]),{user:g}=(0,n.a)(),{addFavorite:x,getFavorites:m}=(0,o.s)();(0,a.useEffect)(()=>{(async()=>{try{let e=await c.Z.get("/3/movie/now_playing?language=en-US&page=1");if(200!==e.status)throw Error("Network response was not ok");console.log(e.data),t(e.data)}catch(e){d(Error("Error fetching data"))}})(),g&&m().then(e=>{h(e.map(e=>e.id))}).catch(e=>{console.error(e)})},[m,g]);let f=(e,t)=>{x(e,t).then(s=>{s?t?(h(t=>[...t,e]),console.log("Favorite added")):(h(t=>t.filter(t=>t!==e)),console.log("Favorite removed")):console.error("Could not update favorite list")}).catch(e=>{console.log("Error adding favorite:",e)})};if(s)return(0,r.jsxs)("div",{className:"text-xs h-screen flex items-center justify-center text-black dark:text-white",children:["Error: ",s.message]});if(!e)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-3xl text-center my-4 font-bold text-gray-900 dark:text-white",children:"Now Playing"}),(0,r.jsx)(l.Z,{})]});let v=e.results.slice(0,6);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-3xl text-center my-4 font-bold text-gray-900 dark:text-white",children:"Now Playing"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-6 gap-1 justify-items-center",children:v.map(e=>(0,r.jsx)(i.Z,{movie:e,onChange:f,user:g?{sessionId:g.sessionId}:{sessionId:null},checkedIds:u},e.id))})]})}},641:function(e,t,s){"use strict";var r=s(7437),a=s(9751),o=s(2265),n=s(1756),i=s(4889),l=s(9085),c=s(6113),d=s(9981);t.default=()=>{let[e,t]=(0,o.useState)(),[s,u]=(0,o.useState)(null),[h,g]=(0,o.useState)([]),[x,m]=(0,o.useState)(6),{user:f}=(0,i.a)(),{addFavorite:v,getFavorites:p}=(0,l.s)();(0,o.useEffect)(()=>{(async()=>{try{let e=await d.Z.get("/3/discover/movie?include_adult=false&include_video=false&page=1&sort_by=popularity.desc&with_original_language=en");if(200!==e.status)throw Error("Network response was not ok for endpoint1");let s=await e.data,r=await d.Z.get("/3/discover/movie?include_adult=false&include_video=false&page=2&sort_by=popularity.desc&with_original_language=en");if(200!==r.status)throw Error("Network response was not ok for endpoint2");let a=await r.data,o={...s,results:[...s.results,...a.results].slice(0,30)};console.log(o),t(o)}catch(e){u(e)}})(),f&&p().then(e=>{g(e.map(e=>e.id))}).catch(e=>{console.error(e)})},[p,f]);let j=(e,t)=>{v(e,t).then(s=>{s?t?(g(t=>[...t,e]),console.log("Favorite added")):(g(t=>t.filter(t=>t!==e)),console.log("Favorite removed")):console.error("Could not update favorite list")}).catch(e=>{console.log("Error adding favorite:",e)})};return s?(0,r.jsxs)("div",{className:"text-xs",children:["Error: ",s.message]}):e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-3xl text-center my-4 font-bold text-gray-900 dark:text-white",children:"Popular List"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-6 gap-1 justify-items-center",children:e.results.slice(0,x).map(e=>(0,r.jsx)(n.Z,{movie:e,onChange:j,user:f?{sessionId:f.sessionId}:{sessionId:null},checkedIds:h},e.id))}),x<e.results.length&&(0,r.jsx)("div",{className:"flex justify-center mt-4",children:(0,r.jsx)(a.zx,{onClick:()=>{m(e=>e+6)},children:"Load More"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-3xl text-center my-4 font-bold text-gray-900 dark:text-white",children:"Popular List"}),(0,r.jsx)(c.Z,{})]})}},6113:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=()=>(0,r.jsx)("div",{className:"border border-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto",children:(0,r.jsxs)("div",{className:"animate-pulse flex space-x-4",children:[(0,r.jsx)("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),(0,r.jsxs)("div",{className:"flex-1 space-y-6 py-1",children:[(0,r.jsx)("div",{className:"h-2 bg-slate-700 rounded"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsx)("div",{className:"h-2 bg-slate-700 rounded col-span-2"}),(0,r.jsx)("div",{className:"h-2 bg-slate-700 rounded col-span-1"})]}),(0,r.jsx)("div",{className:"h-2 bg-slate-700 rounded"})]})]})]})})},4889:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return l},a:function(){return c}});var r=s(7437),a=s(2265),o=s(9981),n=s(9376);let i=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,s=(0,n.useRouter)(),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("user");e&&(c(JSON.parse(e)),u(!1))},[]);let h=async e=>{try{let t=await o.Z.get("/3/authentication/token/new"),s=await t.data,r="https://www.themoviedb.org/authenticate/".concat(s.request_token,"?redirect_to=").concat("".concat("http://localhost:3000"),"/approved?username=").concat(e);window.open(r,"_blank")}catch(e){console.log(e)}},g=async(e,t)=>{let s=localStorage.getItem("userdb"),r=s?JSON.parse(s):[];if(r.find(t=>t.username===e))return!1;{await h(e);let s={username:e,password:t,sessionId:null};return r.push(s),localStorage.setItem("userdb",JSON.stringify(r)),c(s),!0}};return(0,r.jsx)(i.Provider,{value:{user:l,login:(e,t)=>{let s=localStorage.getItem("userdb"),r=(s?JSON.parse(s):[]).find(t=>t.username===e);return!!r&&r.password===t&&(r.sessionId||h(e),c(r),localStorage.setItem("user",JSON.stringify(r)),!0)},register:g,logout:()=>{c(null),localStorage.removeItem("user"),window.location.reload(),s.push("/")}},children:t})},c=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9085:function(e,t,s){"use strict";s.d(t,{FavoriteProvider:function(){return l},s:function(){return c}});var r=s(7437),a=s(2265),o=s(9981),n=s(4889);let i=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,{user:s}=(0,n.a)(),a=async()=>{let e=localStorage.getItem("user");try{console.log(e&&JSON.parse(e).sessionId);let t=await o.Z.get("/3/account/".concat("21572701","/favorite/movies?language=en-US&page=1&session_id=").concat(e&&JSON.parse(e).sessionId));return console.log(t.data.results),t.data.results}catch(e){return console.error("Error requesting GET favorites:",e),Promise.reject(e)}},l=async(e,t)=>{try{return!!(await o.Z.post("/3/account/".concat("21572701","/favorite?session_id=").concat(s&&s.sessionId),{media_type:"movie",media_id:e,favorite:t})).data.success}catch(e){return console.error("Error requesting POST favorite:",e),!1}};return(0,r.jsx)(i.Provider,{value:{getFavorites:a,addFavorite:l},children:t})},c=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useFavorite must be used within a FavoriteProvider");return e}},9981:function(e,t,s){"use strict";let r=s(3464).Z.create({baseURL:"https://api.themoviedb.org",headers:{accept:"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNDExNTRiZTU3ODExZDJhZjY2YTY3Y2IzNmJlNjU2NiIsIm5iZiI6MTcyOTEyMjYxOC41Mzk2NTUsInN1YiI6IjY3MGU1ZjdmMGI4MDA1MzdkNzVjZWFjNiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.1ydqrJxAM5ja3tZCKmktPtenQ68DkX_f6E-5m2kyVsA")}});t.Z=r}},function(e){e.O(0,[51,240,699,422,501,301,503,648,751,971,117,744],function(){return e(e.s=4960)}),_N_E=e.O()}]);